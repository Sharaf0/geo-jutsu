(this["webpackJsonpgeo-jutsu"]=this["webpackJsonpgeo-jutsu"]||[]).push([[0],{10:function(e,t,n){e.exports={clicked:"button_clicked__R6E18",myButton:"button_myButton__2Rz3z",wiggle:"button_wiggle__3rqZd"}},14:function(e,t,n){e.exports=n(20)},20:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(12),u=n.n(a),i=n(5),l=n(3),c=n(6),s=n(2),m=n(4),d=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,[{key:"draw",value:function(e,t,n){if(0!==e.length)for(var o=0;o<e.length;o++){var r=e[o],a=new l.b(2,10),u=new l.g({color:n}),i=new l.f(a,u);i.position.setX(r.x),i.position.setY(r.y),t.add(i)}}}]),e}(),g=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,[{key:"draw",value:function(e,t,n){if(0!==e.length)for(var o=0;o<e.length;o++){var r=e[o],a=new l.e({color:n}),u=[];u.push(r.start.toVector2()),u.push(r.end.toVector2());var i=(new l.a).setFromPoints(u),c=new l.d(i,a);t.add(c)}}}]),e}(),b=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,null,[{key:"getRandomColor",value:function(){return Math.floor(16777215*Math.random())}},{key:"getNewRandomColorHex",value:function(){for(var t=e.getRandomColor();t in e.allColors;)t=e.getRandomColor();return e.allColors[t]=t,t}},{key:"getNewPointsGroupColor",value:function(){var t=e.getNewRandomColorHex(),n=new l.c;return n.setHex(t),e.pointsGroupColors.push(n),n}},{key:"getNewSegmentsGroupColor",value:function(){var t=e.getNewRandomColorHex(),n=new l.c;return n.setHex(t),e.segmentsGroupColors.push(n),n}},{key:"getRandomPointsGroupColor",value:function(t){return e.pointsGroupColors.length>t?e.pointsGroupColors[t]:e.getNewPointsGroupColor()}},{key:"getRandomSegmentsGroupColor",value:function(t){return e.segmentsGroupColors.length>t?e.segmentsGroupColors[t]:e.getNewSegmentsGroupColor()}},{key:"getDefaultPointColor",value:function(){var t=new l.c("red");return e.allColors[t.getHex()]=t.getHex(),t}},{key:"getDefaultSegmentColor",value:function(){var t=new l.c("blue");return e.allColors[t.getHex()]=t.getHex(),t}}]),e}();b.pointsGroupColors=new Array,b.segmentsGroupColors=new Array,b.allColors={};var f=function(){function e(){Object(s.a)(this,e),this.pointDrawer=void 0,this.segmentDrawer=void 0,this.pointDrawer=new d,this.segmentDrawer=new g}return Object(m.a)(e,[{key:"draw",value:function(e,t){if(e&&(e.pointsGroups.length||e.segmentsGroups.length)){for(var n=0;n<e.pointsGroups.length;n++){var o=e.pointsGroups[n];this.pointDrawer.draw(o,t,b.getRandomPointsGroupColor(n))}for(var r=0;r<e.segmentsGroups.length;r++){var a=e.segmentsGroups[r];this.segmentDrawer.draw(a,t,b.getRandomSegmentsGroupColor(r))}}}}]),e}(),v=function(){function e(){Object(s.a)(this,e),this.pointDrawer=new d,this.segmentDrawer=new g,this.stepDrawer=new f}return Object(m.a)(e,[{key:"draw",value:function(e,t,n,o,r,a){e.remove.apply(e,e.children),a?this.stepDrawer.draw(a,e):(o&&(t=[].concat(Object(c.a)(t),[o])),r&&(n=[].concat(Object(c.a)(n),[r])),this.pointDrawer.draw(t,e,b.getDefaultPointColor()),this.segmentDrawer.draw(n,e,b.getDefaultSegmentColor()))}}]),e}(),h=function(){function e(t,n){Object(s.a)(this,e),this.x=void 0,this.y=void 0,this.id=void 0,this.x=t,this.y=n,this.id=e.IDs++}return Object(m.a)(e,[{key:"toVector2",value:function(){return new l.j(this.x,this.y)}}]),e}();h.IDs=0;var p=function(){function e(){Object(s.a)(this,e),this.canvas=void 0,this.canvas=document.getElementById("element that does not exist")}return Object(m.a)(e,[{key:"getPoint",value:function(e,t){var n=this.canvas.getBoundingClientRect(),o=this.canvas.width/n.width,r=this.canvas.height/n.height,a=new h((e-n.left)*o,(t-n.top)*r);return new h(a.x-this.canvas.width/2,this.canvas.height/2-a.y)}},{key:"onMouseDown",value:function(e,t){return this.canvas&&0===t.button&&"Point"===e?[this.getPoint(t.clientX,t.clientY),null,null]:[null,null,null]}},{key:"onMouseMove",value:function(e,t){return this.canvas?"Nothing"===e?[null,null,null]:"Point"===e?[this.getPoint(t.clientX,t.clientY),null,null]:[null,null,null]:[null,null,null]}}]),e}(),w={drawingMode:"Point",setCurrentDrawingMode:function(){}},C=Object(o.createContext)(w),j=r.a.createContext({currentStep:null,currentStepNumber:-1,stepsCount:0,next:function(){},prev:function(){},run:function(e,t,n){}}),O={inputPoints:[],inputSegments:[],addPoint:function(e){},addSegment:function(e){}},k=Object(o.createContext)(O);var y=function(){var e=Object(o.useRef)(document.getElementById("element that does not exist")),t=Object(o.useState)(new l.i),n=Object(i.a)(t,1)[0],a=Object(o.useMemo)((function(){return new v}),[]),u=Object(o.useMemo)((function(){return new p}),[]),c=Object(o.useContext)(C).drawingMode,s=Object(o.useContext)(j).currentStep,m=Object(o.useContext)(k),d=m.addPoint,g=m.addSegment,b=m.inputPoints,f=m.inputSegments,h=Object(o.useState)(null),w=Object(i.a)(h,2),O=w[0],y=w[1],E=Object(o.useState)(null),S=Object(i.a)(E,2),x=S[0],P=S[1],G=Object(o.useState)(!1),N=Object(i.a)(G,2),M=N[0],D=N[1];return Object(o.useEffect)((function(){D(null!==s)}),[s]),Object(o.useEffect)((function(){var t=new l.k({canvas:e.current});t.setClearColor(new l.c("white"));var o=new l.h(-e.current.width/2,e.current.width/2,e.current.height/2,e.current.height/-2,.01,2e3);o.position.z=50,u.canvas=e.current;!function e(){requestAnimationFrame(e),t.render(n,o)}()}),[]),Object(o.useEffect)((function(){a.draw(n,b,f,O,x,s)}),[b,f,O,x,a,n,s]),r.a.createElement(r.a.Fragment,null,r.a.createElement("canvas",{onMouseDown:function(e){if(!M){var t=u.onMouseDown(c,e);if(3!==t.length)throw Error("onMouseDown must return 3 items, [Point, Segment, Polygon]");var n=t[0],o=t[1];n&&d(n),o&&g(o)}},onMouseMove:function(e){if(!M){var t=u.onMouseMove(c,e);if(3!==t.length)throw Error("onMouseMove must return 3 items, [Point, Segment, Polygon]");var n=t[0],o=t[1];n&&y(n),o&&P(o)}},onMouseLeave:function(){y(null),P(null)},ref:e,width:"500",height:"500",style:{border:"1px solid black"}}))},E=n(7),S=n(1),x=n(10),P=n.n(x),G=n(13),N=n.n(G);var M=function(e){var t,n={backgroundColor:e.originalColor},o=N()((t={},Object(S.a)(t,P.a.myButton,!0),Object(S.a)(t,P.a.clicked,e.isClicked),t));return e.isClicked&&(n.backgroundColor=e.clickedColor),r.a.createElement("button",{style:n,onClick:function(){e.isClicked||e.onClick(e.value)},className:o},e.value)},D=function(e){var t=Object(o.useState)([]),n=Object(i.a)(t,2),a=n[0],u=n[1];Object(o.useEffect)((function(){u(e.buttons)}),[e.buttons]);var l=Object(o.useCallback)((function(e){var t=a.find((function(t){return t.value===e}));if(!t)throw Error("value ".concat(e," must be found!"));if(t.isClicked)throw Error("this function should not be called if the button is already clicked!");var n=a.map((function(t){return t.value===e?Object(E.a)({},t,{isClicked:!0}):Object(E.a)({},t,{isClicked:!1})}));u(n)}),[a]);return r.a.createElement("div",null,a.map((function(e){var t=Object(E.a)({},e,{onClick:function(t){l(t),e.onClick(t)}});return r.a.createElement(M,Object.assign({key:t.value},t))})))};var R=function(e){var t=r.a.useContext(C),n=t.drawingMode,a=t.setCurrentDrawingMode,u=Object(o.useCallback)((function(e){a(e)}),[a]),i=e.buttons.map((function(e){return e.value===n?Object(E.a)({},e,{onClick:u,isClicked:!0}):Object(E.a)({},e,{onClick:u})}));return r.a.createElement("div",{className:"btn-group-vertical"},r.a.createElement(D,{buttons:i}),r.a.createElement("span",null,n))},A=(n(19),function(){var e=Object(o.useContext)(j),t=e.stepsCount,n=e.currentStepNumber,a=e.next,u=e.prev;return 0===t?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",null,n," / ",t-1),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:u,disabled:0===n},"<"),r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Start"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:a,disabled:n===t-1},">")),r.a.createElement("div",{className:"progress",style:{marginTop:20}},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:"".concat(100*n/(t-1),"%")}})))}),H=function(e){var t=Object(o.useContext)(j).run,n=Object(o.useContext)(k),a=n.inputPoints,u=n.inputSegments,i=function(n){var o=e.algorithms.find((function(e){return e.Name()===n}));if(!o)throw Error("Algorithm ".concat(n," must be found"));t(o,a,u)},l=e.algorithms.map((function(e){return{value:e.Name(),clickedColor:"darkblue",originalColor:"lightblue",isClicked:!1,onClick:i}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Algorithms"),r.a.createElement(D,{buttons:l}))},_=function(){var e=Object(o.useState)(w.drawingMode),t=Object(i.a)(e,2),n=t[0],r=t[1];return{drawingMode:n,setCurrentDrawingMode:Object(o.useCallback)((function(e){r(e)}),[])}},B=function e(){Object(s.a)(this,e),this.pointsGroups=void 0,this.segmentsGroups=void 0,this.pointsGroups=new Array,this.segmentsGroups=new Array},F=function(){var e=Object(o.useState)(-1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(null),u=Object(i.a)(a,2),l=u[0],s=u[1],m=Object(o.useState)([]),d=Object(i.a)(m,2),g=d[0],b=d[1];return{currentStep:l,currentStepNumber:n,stepsCount:g.length,next:function(){n!==g.length-1&&(s(g[n+1]),r(n+1))},prev:function(){0!==n&&(s(g[n-1]),r(n-1))},run:function(e,t,n){var o=new B;o.pointsGroups=[t],o.segmentsGroups=[n];var a=e.Run(t,n),u=[o].concat(Object(c.a)(a));b(u),s(u[0]),r(0)}}},I=function(){function e(){Object(s.a)(this,e)}return Object(m.a)(e,[{key:"Run",value:function(e,t){return e.map((function(e){var t=new B;return t.pointsGroups.push([e]),t}))}},{key:"Name",value:function(){return"Simple"}}]),e}(),z=function(){function e(){Object(s.a)(this,e),this.algorithms=void 0,this.algorithms=[new I]}return Object(m.a)(e,[{key:"getAll",value:function(){return this.algorithms}}]),e}(),V=function(){var e=Object(o.useState)(O.inputPoints),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(O.inputSegments),u=Object(i.a)(a,2),l=u[0],s=u[1];return{addPoint:Object(o.useCallback)((function(e){r([].concat(Object(c.a)(n),[e]))}),[n]),addSegment:Object(o.useCallback)((function(e){s([].concat(Object(c.a)(l),[e]))}),[l]),inputPoints:n,inputSegments:l}},X=[{isClicked:!1,value:"Nothing",originalColor:"lightgrey",clickedColor:"grey"},{isClicked:!1,value:"Point",originalColor:"#fe2636",clickedColor:"darkred"},{isClicked:!1,value:"Line",originalColor:"#f5dd33",clickedColor:"#f9a905"},{isClicked:!1,value:"Polygon",originalColor:"#90eb35",clickedColor:"green"}];var Y=function(){var e=new z;return r.a.createElement(k.Provider,{value:V()},r.a.createElement(j.Provider,{value:F()},r.a.createElement(C.Provider,{value:_()},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(H,{algorithms:e.getAll()})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement(y,null),r.a.createElement(A,null)),r.a.createElement("div",{className:"col-sm-3"},r.a.createElement(R,{buttons:X})))))))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2e4620f6.chunk.js.map